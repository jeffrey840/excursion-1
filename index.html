<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Guessing Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        img {
            width: 300px;
            height: 200px;
            object-fit: cover;
            margin: 20px;
        }
        button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        #message {
            margin-top: 20px;
            font-size: 18px;
            color: green;
        }
    </style>
</head>
<body>
<h1>Image Guessing Game</h1>
<img id="image" src="" alt="Guess this image">
<div id="options"></div>
<div id="message"></div>

<script>
    // Fisher-Yates Shuffle for efficient shuffling
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // Precompute game rounds
    function precomputeRounds(images, words) {
        return images.map((image, index) => {
            // Correct word for the image
            const correctWord = words[index];

            // Randomly select 2 incorrect words
            const incorrectWords = shuffle(
                    words.filter((word, i) => i !== index) // Exclude the correct word
            ).slice(0, 2);

            // Combine correct word and incorrect words
            const options = shuffle([correctWord, ...incorrectWords]);

            return { image, correctWord, options };
        });
    }

    // Dataset: 1,000 images and words (mock example)
    const images = Array.from({ length: 1000 }, (_, i) => `https://via.placeholder.com/300x200?text=Image${i}`);
    const words = Array.from({ length: 1000 }, (_, i) => `word${i}`);

    // Precompute all game rounds
    const gameRounds = precomputeRounds(images, words);
    let currentRoundIndex = 0;

    // Play the game
    function playGame() {
        if (currentRoundIndex >= gameRounds.length) {
            document.getElementById('message').textContent = "You've completed the game!";
            document.getElementById('options').innerHTML = '';
            document.getElementById('image').style.display = 'none';
            return;
        }

        const currentRound = gameRounds[currentRoundIndex];
        const imageElement = document.getElementById('image');
        const optionsContainer = document.getElementById('options');
        const messageElement = document.getElementById('message');

        // Set the image
        imageElement.src = currentRound.image;

        // Clear previous options and message
        optionsContainer.innerHTML = '';
        messageElement.textContent = '';

        // Create buttons for options
        currentRound.options.forEach(option => {
            const button = document.createElement('button');
            button.textContent = option;
            button.addEventListener('click', () => {
                if (option === currentRound.correctWord) {
                    messageElement.textContent = 'Correct!';
                    messageElement.style.color = 'green';
                    currentRoundIndex++;
                    setTimeout(playGame, 1000); // Move to next round after 1 second
                } else {
                    messageElement.textContent = `Incorrect! Try again.`;
                    messageElement.style.color = 'red';
                }
            });
            optionsContainer.appendChild(button);
        });
    }

    // Start the game
    playGame();
</script>
</body>
</html>
